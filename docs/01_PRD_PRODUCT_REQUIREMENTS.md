# JobChat PRD (Product Requirements Document)

**Version:** 3.0
**Last Updated:** 2026-01-13
**Status:** Production Ready

---

## 1. 제품 개요

### 1.1 제품명
**JobChat (잡챗)** - 자연어 기반 채용공고 검색 서비스

### 1.2 제품 비전
사용자가 복잡한 필터를 조작하지 않고 **자연어 대화**만으로 원하는 채용공고를 찾을 수 있는 AI 기반 검색 서비스

### 1.3 핵심 가치 제안
- **자연어 검색**: "강남역 30분 거리 웹디자이너, 연봉 4천 이상" 같은 일상 언어로 검색
- **실제 통근시간 기반**: Google Maps API를 활용한 실제 이동시간 계산
- **의미적 직무 매칭**: AI가 직무 의미를 이해하여 관련 공고 추천
- **대화형 UX**: 부족한 정보는 AI가 친절하게 추가 질문

### 1.4 목표 사용자
- 취업 준비생
- 이직 희망자
- 특정 지역/조건의 일자리를 찾는 구직자

---

## 2. 기능 요구사항

### 2.1 핵심 기능 (MVP)

#### F1: 자연어 채용공고 검색
| 항목 | 내용 |
|------|------|
| 설명 | 사용자가 자연어로 검색 조건을 입력하면 AI가 파싱하여 결과 반환 |
| 입력 | 자연어 메시지 (예: "판교 근처 백엔드 개발자, 연봉 5천 이상") |
| 출력 | 조건에 맞는 채용공고 목록 + AI 응답 텍스트 |
| 우선순위 | P0 (필수) |

**검색 조건 파라미터:**
| 파라미터 | 필수 여부 | 설명 | 예시 |
|----------|----------|------|------|
| job_type | 필수 | 직무/직종 | "백엔드 개발자", "UI/UX 디자이너" |
| salary_min | 필수 | 최소 연봉 (만원, 0=무관) | 5000 (5천만원) |
| location_query | 선택 | 위치/거리 조건 | "강남역", "판교에서 30분" |
| max_commute_minutes | 선택 | 최대 통근시간 (기본 60분) | 30 |
| use_current_location | 선택 | GPS 현재 위치 사용 | true/false |

#### F2: 대화형 정보 수집
| 항목 | 내용 |
|------|------|
| 설명 | 필수 정보(직무, 연봉)가 부족하면 AI가 추가 질문 |
| 동작 | "어떤 직무를 찾으시나요?", "희망 연봉 조건이 있으신가요?" |
| 우선순위 | P0 (필수) |

#### F3: 실시간 통근시간 계산
| 항목 | 내용 |
|------|------|
| 설명 | Google Maps API로 출발지→회사 실제 이동시간 계산 |
| 입력 | 출발지 (텍스트 또는 GPS 좌표) |
| 출력 | 각 공고별 이동시간 (분) + 텍스트 ("지하철 25분") |
| 우선순위 | P0 (필수) |

#### F4: 현재 위치 기반 검색
| 항목 | 내용 |
|------|------|
| 설명 | 브라우저 Geolocation API로 현재 위치 획득 후 검색 |
| 입력 | "내 위치에서 30분 이내", "여기서 가까운" |
| 동작 | GPS 좌표를 Maps API에 직접 전달 |
| 우선순위 | P1 (중요) |

#### F5: 페이지네이션
| 항목 | 내용 |
|------|------|
| 설명 | 검색 결과를 20건씩 페이지 단위로 제공 |
| 동작 | "더 보기" 버튼으로 추가 결과 로드 |
| 우선순위 | P1 (중요) |

#### F6: 대화 히스토리 유지
| 항목 | 내용 |
|------|------|
| 설명 | 세션 내 대화 맥락 유지 |
| 동작 | conversation_id로 멀티턴 대화 관리 |
| 우선순위 | P2 (선택) |

---

### 2.2 지원 기능

#### F7: 복수 직무 검색
| 항목 | 내용 |
|------|------|
| 설명 | "개발자 아니면 디자이너" 같은 복수 직무 검색 지원 |
| 동작 | AI가 직무를 파싱하여 각각 검색 후 합집합 반환 |

#### F8: 복수 출발지 검색
| 항목 | 내용 |
|------|------|
| 설명 | "강남역이나 판교에서 30분" 같은 복수 출발지 지원 |
| 동작 | 출발지별 이동시간 계산 후 최단 시간으로 필터 |

#### F9: 역지오코딩
| 항목 | 내용 |
|------|------|
| 설명 | GPS 좌표를 사람이 읽을 수 있는 주소로 변환 |
| 용도 | 현재 위치 확인용 UI 표시 |

---

## 3. 비기능 요구사항

### 3.1 성능 요구사항

| 항목 | 목표 | 비고 |
|------|------|------|
| 응답 시간 | < 10초 | 3-Stage 필터링 + Maps API 호출 포함 |
| 동시 사용자 | 100명+ | Cloud Run 오토스케일링 |
| API 타임아웃 | 60초 | 복잡한 검색 대응 |

### 3.2 확장성 요구사항

| 항목 | 현재 | 확장 목표 |
|------|------|----------|
| 공고 수 | ~1,000건 | 10,000건+ |
| 크롤링 소스 | 잡코리아 | 사람인, 원티드 추가 |
| 지역 범위 | 서울 전체 (25개 구) | 수도권 확장 |
| 직무 카테고리 | 5개 (개발/디자인/마케팅/기획/경영지원) | 전체 직군 |

### 3.3 가용성 요구사항

| 항목 | 목표 |
|------|------|
| 서비스 가용성 | 99.5% |
| 데이터 백업 | Firestore 자동 백업 |
| 장애 복구 | Cloud Run 자동 재시작 |

---

## 4. 데이터 요구사항

### 4.1 수집 데이터

**채용공고 (jobs collection):**
| 필드 | 타입 | 필수 | 설명 |
|------|------|------|------|
| id | string | Y | 고유 ID (jk_XXXXXXXX) |
| title | string | Y | 공고 제목 |
| company_name | string | Y | 회사명 |
| location | string | Y | 근무지 (시/구 수준) |
| location_full | string | N | 상세 주소 (Maps API용) |
| salary_text | string | N | 연봉 텍스트 ("3,500~4,500만원") |
| salary_min | integer | N | 최소 연봉 (만원) |
| salary_max | integer | N | 최대 연봉 (만원) |
| experience_type | string | N | 경력 조건 |
| employment_type | string | N | 고용 형태 |
| deadline | string | N | 마감일 |
| url | string | Y | 원문 URL |
| mvp_category | string | N | MVP 카테고리 |
| is_active | boolean | Y | 활성 상태 |
| created_at | timestamp | Y | 생성일 |
| updated_at | timestamp | Y | 수정일 |

### 4.2 MVP 범위 정의

**지역 범위:** 서울 전체 (25개 구)
- 크롤러 설정: `TARGET_LOCAL_CODE = "I000"` (서울 전체)

**직무 범위 (5개 카테고리):**
| 카테고리 | 포함 직무 |
|----------|----------|
| 개발 | 백엔드, 프론트엔드, 풀스택, 앱개발, 데이터, AI, DevOps, QA 등 |
| 디자인 | UI/UX, 웹디자인, 그래픽, 영상, 제품, 브랜드 디자인 등 |
| 마케팅 | 퍼포먼스, 콘텐츠, 브랜드, CRM 마케팅 등 |
| 기획 | 서비스기획, PM, 사업기획, 전략기획 등 |
| 경영지원 | 인사, 총무, 재무회계, 법무, 비서 등 |

**제외 범위:**
- 지역: 서울 외 지역 (경기, 인천 등)
- 직무: 영업, 서비스, 의료, 교육, 연구개발 등

---

## 5. 외부 의존성

### 5.1 필수 API

| API | 용도 | 비용 |
|-----|------|------|
| Google Gemini API | AI 대화/직무 필터링 | 사용량 기반 |
| Google Maps Distance Matrix API | 이동시간 계산 | 요청당 과금 |
| Google Cloud Firestore | 데이터베이스 | 읽기/쓰기 기반 |

### 5.2 선택 API

| API | 용도 |
|-----|------|
| Google Maps Geocoding API | 역지오코딩 |
| Browser Geolocation API | 현재 위치 획득 |

---

## 6. UI/UX 요구사항

### 6.1 화면 구성

```
┌─────────────────────────────────────┐
│  잡챗 - 자연어로 채용공고 검색       │  ← 헤더
├─────────────────────────────────────┤
│                                     │
│  📍 현재 위치: 서울 광진구 화양동    │  ← 위치 표시 (선택)
│                                     │
│  ┌─────────────────────────────┐    │
│  │ [User] 강남역 30분 거리      │    │  ← 메시지 버블
│  │        웹디자이너 연봉 무관  │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ [AI] 15건의 웹디자이너 공고  │    │  ← AI 응답
│  │      를 찾았습니다!         │    │
│  │                             │    │
│  │  ┌───────────────────────┐  │    │
│  │  │ 1. 웹디자이너 (주)ABC │  │    │  ← 공고 카드
│  │  │    서울 강남구 | 협의  │  │    │
│  │  │    🚇 지하철 15분      │  │    │  ← 이동시간
│  │  └───────────────────────┘  │    │
│  │  ┌───────────────────────┐  │    │
│  │  │ 2. UI 디자이너 DEF    │  │    │
│  │  │    ...                │  │    │
│  │  └───────────────────────┘  │    │
│  │                             │    │
│  │  [ 더 보기 (15건 중 2건) ]  │    │  ← 페이지네이션
│  └─────────────────────────────┘    │
│                                     │
├─────────────────────────────────────┤
│  [메시지 입력...]           [전송]   │  ← 입력 영역
└─────────────────────────────────────┘
```

### 6.2 반응형 요구사항

| 디바이스 | 레이아웃 |
|----------|----------|
| 데스크톱 | 최대 너비 896px 중앙 정렬 |
| 태블릿 | 좌우 패딩 적용 |
| 모바일 | 전체 너비, 터치 최적화 |

---

## 7. 보안 요구사항

### 7.1 인증/인가
- 현재: 인증 없이 공개 접근 (MVP)
- 향후: Firebase Auth 연동 계획

### 7.2 데이터 보호
- API 키는 환경변수로 관리 (.env)
- CORS 설정으로 허용 오리진 제한
- Firestore 보안 규칙 적용

### 7.3 입력 검증
- 메시지 길이 제한 (1-1000자)
- 페이지 크기 제한 (1-100)
- 좌표 범위 검증

---

## 8. 운영 요구사항

### 8.1 모니터링
- Health Check 엔드포인트 (`/health`)
- 서비스별 상태 확인 (Firestore, Gemini, Maps)
- 통계 엔드포인트 (`/stats`)

### 8.2 로깅
- 검색 파라미터 로깅
- API 호출 로깅
- 에러 스택트레이스

### 8.3 크롤링 운영
- 주기: 일 1회 권장
- 배치 크기: 500건
- MVP 필터링 적용

---

## 9. 제약사항 및 한계

### 9.1 현재 제약사항

| 제약 | 영향 | 대응 |
|------|------|------|
| 잡코리아만 지원 | 공고 수 제한 | 추가 소스 크롤러 개발 예정 |
| 서울 지역만 지원 | 수도권 외 검색 불가 | 지역 확장 예정 |
| MVP 5개 카테고리만 | 일부 직군 검색 불가 | 카테고리 확장 예정 |
| Python 3.9 경고 | 향후 지원 중단 | 3.10+ 업그레이드 필요 |
| google.generativeai deprecated | 마이그레이션 필요 | google.genai로 전환 예정 |

### 9.2 알려진 이슈

| 이슈 | 상태 | 비고 |
|------|------|------|
| 크롤링 속도 느림 | 미해결 | 상세페이지 병렬화 필요 |
| 주소 없는 공고 거리 계산 불가 | 제외 처리 | 주소 데이터 품질 개선 필요 |

---

## 10. 릴리스 이력

| 버전 | 날짜 | 주요 변경 |
|------|------|----------|
| V1.0 | 2026-01-10 | MVP 출시 (기본 검색) |
| V2.0 | 2026-01-12 | 2-Stage 하이브리드 필터 |
| V3.0 | 2026-01-13 | 3-Stage 필터 + Maps API 통합 |

---

## 11. 향후 로드맵

### Phase 1 (완료)
- [x] 자연어 검색 기본 기능
- [x] AI 직무 필터링
- [x] Maps API 통근시간 계산
- [x] GPS 현재 위치 지원

### Phase 2 (계획)
- [ ] 추가 채용 사이트 크롤러 (사람인, 원티드)
- [ ] 사용자 인증 시스템
- [ ] 검색 히스토리 저장
- [ ] 관심 공고 북마크

### Phase 3 (계획)
- [ ] 이력서 기반 추천
- [ ] 알림 기능 (신규 공고)
- [ ] 모바일 앱 (React Native)
